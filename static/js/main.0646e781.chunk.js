(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{104:function(e,t,n){e.exports={sidebar:"MenuProfile_sidebar__1QI7f"}},106:function(e,t,n){e.exports={root:"ModalOverlay_root__2Xt1g"}},107:function(e,t,n){e.exports={wrap:"Loader_wrap__1KBmP"}},117:function(e,t,n){},16:function(e,t,n){e.exports={itemFeed:"FeedItem_itemFeed__1zsNy",icons:"FeedItem_icons__Qi-Y3",iconWrap:"FeedItem_iconWrap__2b32Q",iconBlackout:"FeedItem_iconBlackout__3JQD-",icon:"FeedItem_icon__3KRn4",iconBlackWrap:"FeedItem_iconBlackWrap__8qjMZ",itemTop:"FeedItem_itemTop__EzxSj",itemBottom:"FeedItem_itemBottom__1b921",itemPrice:"FeedItem_itemPrice__11o1x",numberOfHiddenPictures:"FeedItem_numberOfHiddenPictures__3TApQ",colorBlue:"FeedItem_colorBlue__h3uq7",colorRed:"FeedItem_colorRed__39RoO"}},18:function(e,t,n){e.exports={wrapForm:"pages_wrapForm__1HuDN",form:"pages_form__GMR7J",wrapEditForm:"pages_wrapEditForm__24NCV",buttons:"pages_buttons__2KrYN",buttonPrimary:"pages_buttonPrimary__2nG6b"}},19:function(e,t,n){e.exports={sectionFeed:"feed_sectionFeed__2ocY1",feedMain:"feed_feedMain__19kmj",feed:"feed_feed__3dy9h",feedStatistics:"feed_feedStatistics__Finpn",colorBlue:"feed_colorBlue__2SaU2",numbersOrders:"feed_numbersOrders__1Rm3-",box:"feed_box__3mMMS",numberShadows:"feed_numberShadows__6yu_Z"}},21:function(e,t,n){e.exports={profile:"profile_profile__3VjSC",orders:"profile_orders__1iOLw",listOrders:"profile_listOrders__nRWDD",wrapEditForm:"profile_wrapEditForm__1vmFp",form:"profile_form__1Yt6A",buttons:"profile_buttons__2c5d8",profileButton:"profile_profileButton__2icBb",buttonPrimary:"profile_buttonPrimary__2-8oo"}},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(35),a=n.n(s),i=(n(117),n(5)),o=n(4),u=n(9),l=n(7),d=n.n(l),j=n(31),b=n.n(j),m=n(0),O=function(){var e=Object(u.h)().pathname;return Object(m.jsx)("header",{className:d()(b.a.header,"m-10"),children:Object(m.jsx)("nav",{className:d()(b.a.navigation,"mt-4 mb-4"),children:Object(m.jsxs)("ul",{className:b.a.content,children:[Object(m.jsxs)("li",{className:b.a.links,children:[Object(m.jsxs)(i.c,{to:"/",className:"pl-5 pr-5 mr-2",isActive:function(){return e.includes("ingredients")||"/"===e},exact:!0,children:[Object(m.jsx)(o.BurgerIcon,{type:"secondary"}),Object(m.jsx)("span",{className:"ml-2 text text_type_main-default",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(m.jsxs)(i.c,{to:"/feed",className:"pl-5 pr-5",children:[Object(m.jsx)(o.ListIcon,{type:"secondary"}),Object(m.jsx)("span",{className:"ml-2 text text_type_main-default",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(m.jsx)("li",{className:b.a.logo,children:Object(m.jsx)(i.b,{to:"/",children:Object(m.jsx)(o.Logo,{})})}),Object(m.jsx)("li",{className:b.a.login,children:Object(m.jsxs)(i.c,{to:"/profile/",exact:!0,className:"pl-5 pr-5",children:[Object(m.jsx)(o.ProfileIcon,{type:"secondary"}),Object(m.jsx)("span",{className:"ml-2 text text_type_main-default",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})})},p=n(37),f=function(){return Object(p.b)()},_=function(){return Object(p.b)()},h=p.c,x=n(22),g=n(2),v=n(10),y="https://norma.nomoreparties.space/api/",N="INIT_USER",S="AUTHORIZED",T="GET_USER",I="LOGIN",E="LOGOUT",k="PATCH_USER",w="INIT_ORDERS",C="POST_LOGIN_USER",R="LOGIN_USER_SUCCESS",F="LOGIN_USER_FAILED",D="POST_LOGOUT",P="LOGOUT_SUCCESS",B="LOGOUT_FAILED",U="POST_UPDATE_TOKEN",A="UPDATE_TOKEN_SUCCESS",L="UPDATE_TOKEN_FAILED",G="GET_INFO_USER",q="GET_INFO_SUCCESS",W="GET_INFO_FAILED",M="PATCH_INFO_USER",H="PATCH_INFO_FAILED",V="PATCH_INFO_SUCCESS",z="POST_REGISTRY_USER",J="RESPONSE_SUCCESS_REGISTRY",K="RESPONSE_FAILED_REGISTRY",Q="POST_PASSWORD_REQUEST",X="RESPONSE_FAILED_PASSWORD",Y="RESPONSE_SUCCESS_PASSWORD",Z="POST_NEW_PASSWORD_REQUEST",$="RESPONSE_FAILED_NEW_PASSWORD",ee="RESPONSE_SUCCESS_NEW_PASSWORD",te=function(e){return function(t){t(ue()),fetch("".concat(y,"auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.refreshToken})}).then((function(e){if(!e.ok)throw t(le()),new Error("Network response was not OK");return e.json()})).then((function(){t(de())})).catch((function(e){t(le()),console.error("There has been a problem with fetch operation:",e)}))}};function ne(e){return function(t){var n;return t(je()),fetch("".concat(y,"auth/token"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:null!==(n=e.accessToken)&&void 0!==n?n:""},body:JSON.stringify({token:e.refreshToken})}).then((function(e){if(!e.ok)throw t(be()),new Error("Network response was not OK");return e.json()})).then((function(e){t(me(e.success,e.accessToken,e.refreshToken))})).catch((function(e){t(be()),console.error("There has been a problem with fetch operation:",e)}))}}function re(e){return function(t){var n;t(Oe()),fetch("".concat(y,"auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:null!==(n=e.accessToken)&&void 0!==n?n:""}}).then((function(e){if(!e.ok)throw t(pe()),new Error("Network response was not OK");return e.json()})).then((function(e){t(fe(e.success,{email:e.user.email,name:e.user.name}))})).catch((function(e){t(pe()),console.error("There has been a problem with fetch operation:",e)}))}}function ce(e,t){return function(n){n(_e()),fetch("".concat(y,"auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw n(he()),new Error("Network response was not OK");return e.json()})).then((function(e){n(xe(e.success,{email:e.user.email,name:e.user.name}))})).catch((function(e){n(he()),console.error("There has been a problem with fetch operation:",e)}))}}var se=function(){return{type:w}},ae=function(){return{type:C}},ie=function(){return{type:F}},oe=function(e,t,n,r){return{type:R,success:e,accessToken:t,refreshToken:n,user:r}},ue=function(){return{type:D}},le=function(){return{type:B}},de=function(){return{type:P}},je=function(){return{type:U}},be=function(){return{type:L}},me=function(e,t,n){return{type:A,success:e,accessToken:t,refreshToken:n}},Oe=function(){return{type:G}},pe=function(){return{type:W}},fe=function(e,t){return{type:q,success:e,user:t}},_e=function(){return{type:M}},he=function(){return{type:H}},xe=function(e,t){return{type:V,success:e,user:t}},ge=function(){return{type:K}},ve=function(){return{type:z}},ye=function(e,t,n){return{type:J,success:e,accessToken:t,refreshToken:n}},Ne=function(){return{type:X}},Se=function(){return{type:Q}},Te=function(e,t){return{type:Y,message:e,success:t}},Ie=function(){return{type:$}},Ee=function(){return{type:Z}},ke=function(e,t){return{type:ee,message:e,success:t}},we=n(18),Ce=n.n(we);function Re(){var e=Object(r.useState)({email:"",password:""}),t=Object(v.a)(e,2),n=t[0],c=t[1],s=_(),a=Object(u.h)().pathname,l=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e.currentTarget.name,e.currentTarget.value.trim())))};return Object(m.jsxs)("div",{className:Ce.a.wrapForm,children:[Object(m.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u0445\u043e\u0434"}),Object(m.jsxs)("form",{className:"".concat(Ce.a.form," mb-20"),onSubmit:function(e){e.preventDefault(),s({type:I,user:n})},children:[Object(m.jsx)(o.Input,{type:"email",placeholder:"E-mail",onChange:l,value:n.email,name:"email"}),Object(m.jsx)(o.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:l,icon:"ShowIcon",value:n.password,name:"password"}),Object(m.jsx)(o.Button,{type:"primary",size:"medium",name:"buttonLogin",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default pb-4",children:[Object(m.jsx)("span",{className:"text_color_inactive",children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(m.jsx)(i.b,{to:{pathname:"/register",state:{from:a}},children:" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default",children:[Object(m.jsx)("span",{className:"text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(m.jsx)(i.b,{to:{pathname:"/forgot-password",state:{from:a}},children:" \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}var Fe=n(21),De=n.n(Fe),Pe=n(104),Be=n.n(Pe),Ue=function(){var e=_();return Object(m.jsxs)("div",{className:Be.a.sidebar,children:[Object(m.jsxs)("nav",{className:"text text_type_main-medium mb-20",children:[Object(m.jsx)(i.c,{to:"/profile/",exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(m.jsx)(i.c,{to:"/profile/orders",exact:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(m.jsx)(i.b,{to:"/",onClick:function(t){t.preventDefault(),e({type:E})},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(m.jsx)("br",{}),"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})]})};function Ae(){var e,t=h((function(e){return e.user.getUserInfoSuccess})),n=h((function(e){return e.user.user})),c=Object(r.useState)({email:"",name:"",password:""}),s=Object(v.a)(c,2),a=s[0],i=s[1],u=Object(r.useState)(!1),l=Object(v.a)(u,2),d=l[0],j=l[1],b=_();Object(r.useEffect)((function(){b({type:T})}),[b]),Object(r.useEffect)((function(){t&&i((function(e){return Object(g.a)(Object(g.a)({},e),{},{email:n.email,name:n.name})}))}),[t,n.email,n.name]);var O=function(e){j(!0),i(Object(g.a)(Object(g.a)({},a),{},Object(x.a)({},e.currentTarget.name,e.currentTarget.value)))};return Object(m.jsxs)("div",{className:"".concat(De.a.profile," pl-5 pr-5"),children:[Object(m.jsx)(Ue,{}),Object(m.jsx)("div",{className:De.a.wrapEditForm,children:Object(m.jsxs)("form",{className:"".concat(De.a.form," mb-20"),onSubmit:function(e){e.preventDefault(),j(!1),b(function(e){return{type:k,user:e}}(a))},children:[Object(m.jsx)(o.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:O,value:null!==(e=a.name)&&void 0!==e?e:"",name:"name",icon:"EditIcon"}),Object(m.jsx)(o.Input,{type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:O,value:a.email,name:"email",icon:"EditIcon"}),Object(m.jsx)(o.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:O,value:a.password,name:"password",icon:"EditIcon"}),d&&Object(m.jsxs)("div",{className:De.a.buttons,children:[Object(m.jsx)("div",{className:De.a.profileButton,children:Object(m.jsx)("button",{className:De.a.buttonPrimary,type:"button",onClick:function(){i(Object(g.a)(Object(g.a)({},a),{},{email:n.email,name:n.name})),j(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(m.jsx)("div",{className:De.a.profileButton,children:Object(m.jsx)(o.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})})]})}function Le(){var e=Object(r.useState)(""),t=Object(v.a)(e,2),n=t[0],c=t[1],s=h((function(e){return e.user.resetPasswordSuccess})),a=f(),l=Object(u.h)().pathname;return s?Object(m.jsx)(u.a,{to:{pathname:"/reset-password",state:{from:l}}}):Object(m.jsxs)("div",{className:Ce.a.wrapForm,children:[Object(m.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(m.jsxs)("form",{className:"".concat(Ce.a.form," mb-20"),onSubmit:function(e){e.preventDefault(),a(function(e){return function(t){t(Se()),fetch("".concat(y,"password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){if(!e.ok)throw t(Ne()),new Error("Network response was not OK");return e.json()})).then((function(e){t(Te(e.message,e.success))})).catch((function(e){t(Ne()),console.error("There has been a problem with fetch operation:",e)}))}}(n))},children:[Object(m.jsx)(o.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){c(e.currentTarget.value)},value:n,name:"email"}),Object(m.jsx)(o.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default",children:[Object(m.jsx)("span",{className:"text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(m.jsx)(i.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})}function Ge(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(v.a)(e,2),n=t[0],c=t[1],s=h((function(e){return e.user.registerSuccess})),a=f(),u=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e.currentTarget.name,e.currentTarget.value)))};return Object(m.jsxs)("div",{className:Ce.a.wrapForm,children:[Object(m.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),s?"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{className:"".concat(Ce.a.form," mb-20"),onSubmit:function(e){e.preventDefault(),a(function(e){return function(t){t(ve()),fetch("".concat(y,"auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw t(ge()),new Error("Network response was not OK");return e.json()})).then((function(e){t(ye(e.success,e.accessToken,e.refreshToken))})).catch((function(e){t(ge()),console.error("There has been a problem with fetch operation:",e)}))}}(n))},children:[Object(m.jsx)(o.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:u,value:n.name,name:"name"}),Object(m.jsx)(o.Input,{type:"email",placeholder:"E-mail",onChange:u,value:n.email,name:"email"}),Object(m.jsx)(o.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:u,icon:"ShowIcon",value:n.password,name:"password"}),Object(m.jsx)(o.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default",children:[Object(m.jsx)("span",{className:"text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(m.jsx)(i.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})]})}function qe(){var e=Object(r.useState)({password:"",token:""}),t=Object(v.a)(e,2),n=t[0],c=t[1],s=f(),a=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e.currentTarget.name,e.currentTarget.value)))};return Object(m.jsxs)("div",{className:Ce.a.wrapForm,children:[Object(m.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(m.jsxs)("form",{className:"".concat(Ce.a.form," mb-20"),onSubmit:function(e){e.preventDefault(),s(function(e){return function(t){t(Ee()),fetch("".concat(y,"password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw t(Ie()),new Error("Network response was not OK");return e.json()})).then((function(e){t(ke(e.message,e.success))})).catch((function(e){t(Ie()),console.error("There has been a problem with fetch operation:",e)}))}}(n))},children:[Object(m.jsx)(o.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:a,icon:"ShowIcon",value:n.password,name:"password"}),Object(m.jsx)(o.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:a,value:n.token,name:"token"}),Object(m.jsx)(o.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(m.jsxs)("p",{className:"text text_type_main-default",children:[Object(m.jsx)("span",{className:"text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(m.jsx)(i.b,{to:"/login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})}var We,Me,He,Ve=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!"}),Object(m.jsx)(i.b,{className:"text text_type_main-default text_color_inactive",to:"/",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 >>"})]})},ze=n(49);!function(e){e.Done="done",e.Pending="pending",e.Created="created",e.Cancel="cancel"}(We||(We={})),function(e){e.Top="top",e.Bottom="bottom"}(Me||(Me={})),function(e){e.IngredientInOrder="ingredientInOrder",e.Ingredient="ingredient"}(He||(He={}));var Je=n(225),Ke="GET_INGREDIENTS_REQUEST",Qe="GET_INGREDIENTS_SUCCESS",Xe="GET_INGREDIENTS_FAILED",Ye="ADD_INGREDIENT_IN_ORDER",Ze="DELETE_INGREDIENT_IN_ORDER",$e="DELETE_INGREDIENTS",et="ADD_INGREDIENT_BUN_IN_ORDER",tt="UPDATE_LOCATION_INGREDIENT_IN_ORDER",nt="OPEN_MODAL_DETAILS",rt="CLOSE_MODAL_DETAILS";function ct(){return function(e){e(at()),fetch("".concat(y,"ingredients")).then((function(t){if(!t.ok)throw e(st()),new Error("Network response was not OK");return t.json()})).then((function(t){e(it(t.success,t.data))})).catch((function(t){e(st()),console.error("There has been a problem with fetch operation:",t)}))}}var st=function(){return{type:Xe}},at=function(){return{type:Ke}},it=function(e,t){return{type:Qe,success:e,ingredients:t}},ot=n(53),ut=n.n(ot),lt=function(e){var t=e._id,n=h((function(e){return e.ingredient})),r=n.ingredients,c=n.ingredientsInOrder,s=r.filter((function(e){return e._id===t}))[0],a=s.name,l=s.image,j=s.price,b=_(),O=c.filter((function(e){return e._id===t})).length,p=Object(u.h)(),f=function(e){b(function(e){return{type:nt,_id:e}}(e))},x=Object(Je.a)({type:He.Ingredient,item:{_id:t},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),g=Object(v.a)(x,2),y=g[0].opacity,N=g[1];return Object(m.jsx)(i.b,{id:"link_".concat(t),onClick:function(){return f(t)},to:{pathname:"/ingredients/".concat(t),state:{modal:p}},children:Object(m.jsxs)("div",{ref:N,style:{opacity:y},id:"card_".concat(t),className:d()(ut.a.card,"pr-4 pl-4"),children:[O>0&&Object(m.jsx)(o.Counter,{count:O,size:"default"}),Object(m.jsx)("img",{src:l,alt:a}),Object(m.jsxs)("span",{className:"".concat(ut.a.price," mt-1 mb-1 text text_type_digits-default"),children:[j," ",Object(m.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(m.jsx)("span",{className:"".concat(ut.a.name," text text_type_main-default"),children:a})]})},t)},dt=n(32),jt=n.n(dt),bt=function(){var e=h((function(e){return e.ingredient})).ingredients,t=["bun","sauce","main"],n=Object(r.useRef)(null),c=Object(r.useRef)(null),s=Object(r.useRef)(null),a=Object(r.useRef)(null),i=Object(r.useState)("bun"),u=Object(v.a)(i,2),l=u[0],j=u[1],b=function(e){var t,n,r;(j(e),"bun"===e)&&(null===(t=a.current)||void 0===t||t.scrollToTop());"sauce"===e&&c&&c.current&&(null===(n=a.current)||void 0===n||n.scrollTop(c.current.offsetTop));"main"===e&&s&&s.current&&(null===(r=a.current)||void 0===r||r.scrollTop(s.current.offsetTop))},O=function(){var e,t,n,r=(null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.getScrollTop())||0,i=r?r+230:0,o=(null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.offsetTop)||0,u=(null===s||void 0===s||null===(n=s.current)||void 0===n?void 0:n.offsetTop)||0;j(i>=u?"main":i>=o?"sauce":"bun")};return Object(m.jsxs)("section",{className:"".concat(jt.a.root," mb-10"),children:[Object(m.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("nav",{className:d()(jt.a.tabs,"mb-10"),children:t.map((function(e,t){return Object(m.jsx)(o.Tab,{value:e,active:l===e,onClick:b,children:"bun"===e?"\u0411\u0443\u043b\u043a\u0438":"sauce"===e?"\u0421\u043e\u0443\u0441\u044b":"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},"tab".concat(t).concat(e))}))}),Object(m.jsx)(ze.Scrollbars,{renderTrackVertical:function(e){var t=Object.assign({},e);return Object(m.jsx)("div",Object(g.a)(Object(g.a)({},t),{},{className:jt.a.scrollTrackVertical}))},renderThumbVertical:function(e){var t=Object.assign({},e);return Object(m.jsx)("div",Object(g.a)(Object(g.a)({},t),{},{className:jt.a.scrollThumbVertical}))},ref:a,thumbSize:230,className:jt.a.contentInScroll,onScroll:O,autoHeight:!0,autoHeightMax:716,children:t.map((function(t,r){return Object(m.jsxs)("div",{ref:"bun"===t?n:"sauce"===t?c:s,children:[Object(m.jsx)("h2",{children:"bun"===t?"\u0411\u0443\u043b\u043a\u0438":"sauce"===t?"\u0421\u043e\u0443\u0441\u044b":"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(m.jsx)("section",{className:"".concat(jt.a.ingredients," mt-6 mb-10 mr-4 ml-4"),children:e.filter((function(e){return e.type===t})).map((function(e){var t=e._id;return Object(m.jsx)(lt,{_id:t},t)}))})]},"".concat(r).concat(t))}))})]})]})},mt=n.p+"static/media/check.2022ce2b.svg",Ot=n(78),pt=n.n(Ot),ft=function(){var e=h((function(e){return e.order.number}));return Object(m.jsxs)("section",{className:"".concat(pt.a.content," mt-20 mb-20"),children:[Object(m.jsx)("span",{className:"".concat(pt.a.orderNumber," text text_type_digits-large"),children:e}),Object(m.jsx)("span",{className:"mt-8 mb-15 text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(m.jsx)(mt,{}),Object(m.jsx)("span",{className:"mt-15 mb-2 text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},_t=n(106),ht=n.n(_t),xt=function(e){var t=Object(r.useRef)(null);return Object(m.jsx)("div",{ref:t,onClick:function(n){var r;null===n||void 0===n||n.stopPropagation(),(null===(r=t.current)||void 0===r?void 0:r.className)===(null===n||void 0===n?void 0:n.target).className&&e.onOverlayClick()},className:ht.a.root,children:e.children})},gt=n(54),vt=n.n(gt),yt=document.getElementById("modals")||document.body,Nt=function(e){var t=Object(r.useMemo)((function(){return document.createElement("div")}),[]);Object(r.useEffect)((function(){return yt.insertAdjacentElement("beforeend",t),function(){yt.removeChild(t)}}),[t]);var n=Object(r.useCallback)((function(t){"Escape"===t.key&&(null===e||void 0===e||e.onClose())}),[e]);return Object(r.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[n]),a.a.createPortal(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(xt,{onOverlayClick:e.onClose,children:Object(m.jsxs)("div",{className:"".concat(vt.a.modal," pt-10 pl-10 pb-15 pr-10"),children:[Object(m.jsx)("div",{id:"closeBtn",className:"".concat(vt.a.close," pt-15 pr-10"),onClick:e.onClose,children:Object(m.jsx)(o.CloseIcon,{type:"primary"})}),Object(m.jsx)("h1",{className:"".concat(vt.a.head," text text_type_main-large"),children:e.header}),e.children]})})}),t)},St="GET_ORDER",Tt="POST_ORDER_NUMBER_REQUEST",It="GET_ORDER_NUMBER_SUCCESS",Et="GET_ORDER_NUMBER_FAILED";function kt(e,t){return function(n){n(Rt()),fetch("".concat(y,"orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({ingredients:e})}).then((function(e){if(!e.ok)throw n(Ft()),new Error("Network response was not OK");return e.json()})).then((function(e){n(Dt(e.success,e.order.number)),n({type:$e})})).catch((function(e){n(Ft()),console.error("There has been a problem with fetch operation:",e)}))}}var wt,Ct,Rt=function(){return{type:Tt}},Ft=function(){return{type:Et}},Dt=function(e,t){return{type:It,success:e,value:t}},Pt=n(226),Bt=n(79),Ut=n.n(Bt),At=function(e){var t=e.index,n=e.moveInOrder,c=e.position,s=e._id,a=h((function(e){return e.ingredient})).ingredientsInOrder.filter((function(e){return e._id===s}))[0],i=a.type,u=a.name,l=a.price,j=a.image,b=a.id,O=_(),p=Object(r.useRef)(null),f=Object(Pt.a)({accept:He.IngredientInOrder,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,r){var c;if(p.current){var s=e.index,a=null!==t&&void 0!==t?t:0;if(s!==a){var i=null===(c=p.current)||void 0===c?void 0:c.getBoundingClientRect(),o=(i.bottom-i.top)/2,u=r.getClientOffset().y-i.top;s<a&&u<o||s>a&&u>o||(null===n||void 0===n||n(s,a),e.index=a)}}}}),x=Object(v.a)(f,2),g=x[0].handlerId,y=x[1],N=Object(Je.a)({type:He.IngredientInOrder,item:function(){return{id:b,index:t}},collect:function(e){return{isDragging:e.isDragging()}}}),S=Object(v.a)(N,2),T=S[0].isDragging;(0,S[1])(y(p));var I=T?0:1;return"bun"===i?Object(m.jsx)("div",{className:Ut.a.bunTopBottom,children:Object(m.jsx)(o.ConstructorElement,{type:"top"===c?Me.Top:Me.Bottom,isLocked:!0,text:"".concat(u," (").concat("top"===c?"\u0432\u0435\u0440\u0445":"\u043d\u0438\u0437",")"),price:l,thumbnail:j})}):Object(m.jsxs)("div",{ref:p,style:{opacity:I},className:d()(Ut.a.fillings,"mb-4 mr-4 ml-4"),"data-handler-id":g,children:[Object(m.jsx)(o.DragIcon,{type:"primary"}),Object(m.jsx)(o.ConstructorElement,{isLocked:"bun"===i,text:u,price:l,thumbnail:j,handleClose:function(){return O(function(e){return{type:Ze,_id:e}}(s))}})]})},Lt=n(227),Gt=n.p+"static/media/load.33c066c2.svg",qt=n(107),Wt=n.n(qt),Mt=function(){return Object(m.jsxs)("div",{className:Wt.a.wrap,children:["\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ",Object(m.jsx)(Gt,{})]})},Ht=n(28),Vt=n.n(Ht),zt=function(){var e=h((function(e){return e.ingredient})),t=e.ingredients,n=e.ingredientsInOrder,c=h((function(e){return e.order})),s=c.orderSuccess,a=c.orderRequest,i=h((function(e){return e.user.authorized})),l=Object(u.g)(),j=Object(r.useState)(!1),b=Object(v.a)(j,2),O=b[0],p=b[1],f=Object(r.useMemo)((function(){return n.reduce((function(e,t){var n=t.type,r=t.price;return"bun"===n?e+2*r:e+r}),0)}),[n]),x=_(),y=Object(r.useMemo)((function(){return n.some((function(e){return"bun"===e.type}))}),[n]),N=n.map((function(e){return null===e||void 0===e?void 0:e._id})),S=Object(r.useCallback)((function(e){var n,r,c,s=t.filter((function(t){return t._id===e._id}))[0],a=Object(Lt.a)();x((n="bun"===s.type?et:Ye,r=a,c=e._id,{type:n,id:r,_id:c}))}),[x,t]),T=Object(Pt.a)({accept:He.Ingredient,drop:function(e){S(e)}}),I=Object(v.a)(T,2)[1],E=Object(r.useCallback)((function(e,t){x(function(e,t){return{type:tt,dragIndex:e,hoverIndex:t}}(e,t))}),[x]),k=function(e){return n.filter((function(e){return"bun"===e.type})).map((function(t,n){return Object(m.jsx)(At,{position:e,index:n,_id:t._id},Object(Lt.a)())}))};return Object(m.jsxs)(m.Fragment,{children:[O?Object(m.jsxs)(Nt,{onClose:function(){return p(!1)},children:[a&&Object(m.jsx)(Mt,{}),s&&Object(m.jsx)(ft,{})]}):null,Object(m.jsx)("section",{className:d()(Vt.a.root,"pt-25"),children:Object(m.jsx)("div",{ref:I,className:d()(Vt.a.content,"mb-10"),id:"constructor",children:n.length>0?Object(m.jsxs)(m.Fragment,{children:[k("top"),Object(m.jsx)(ze.Scrollbars,{renderTrackVertical:function(e){var t=Object.assign({},e);return Object(m.jsx)("div",Object(g.a)(Object(g.a)({},t),{},{className:Vt.a.scrollTrackVertical}))},renderThumbVertical:function(e){var t=Object.assign({},e);return Object(m.jsx)("div",Object(g.a)(Object(g.a)({},t),{},{className:Vt.a.scrollThumbVertical}))},autoHeight:!0,autoHeightMin:72,autoHeightMax:425,children:n.map((function(e,t){return"bun"!==e.type&&Object(m.jsx)(At,{moveInOrder:E,index:t,_id:e._id},e.id)}))}),k("bottom"),Object(m.jsxs)("div",{className:"".concat(Vt.a.totalPrice," mb-10"),children:[f>0&&Object(m.jsxs)("span",{className:"".concat(Vt.a.price," text text_type_digits-medium"),children:[f," ",Object(m.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(m.jsx)(o.Button,{type:"primary",size:"medium",onClick:function(){i?(p(!0),x(function(e){return{type:St,ingredientIds:e}}(N))):l.push("/login")},disabled:!y,name:"buttonOrder",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]}):Object(m.jsx)("div",{className:Vt.a.emptyCart,children:Object(m.jsx)(o.BurgerIcon,{type:"primary"})})})})]})},Jt=n(111),Kt=n(224),Qt=(n(216),n(217),function(){var e=h((function(e){return e.ingredient})),t=e.ingredients,n=e.ingredientsSuccess,c=e.ingredientsRequest,s=e.ingredientsFailed,a=f();return Object(r.useEffect)((function(){a(ct())}),[a]),Object(m.jsxs)("main",{children:[s&&Object(m.jsx)("p",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),c&&Object(m.jsx)(Mt,{}),n&&t.length>0&&Object(m.jsxs)(Kt.a,{backend:Jt.a,children:[Object(m.jsx)(bt,{}),Object(m.jsx)(zt,{})]})]})}),Xt=function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},Yt=function(e){switch(e){case We.Done:return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case We.Created:return"\u0421\u043e\u0437\u0434\u0430\u043d";case We.Pending:return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case We.Cancel:return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d";default:return"\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d"}},Zt=function(e){var t=new Date(e);return function(e){var t,n=new Date,r=Math.abs(n.getTime()-e.getTime()),c=Math.ceil(r/864e5);switch(!0){case 0===c:t="\u0421\u0435\u0433\u043e\u0434\u043d\u044f ";break;case 1===c:t="\u0412\u0447\u0435\u0440\u0430 ";break;case c>1&&c<=4:t="".concat(c," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434 ");break;default:t="".concat(c," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434 ")}return t}(t)+"".concat(("0"+t.getHours()).slice(-2),":").concat(("0"+t.getMinutes()).slice(-2))+(" i-GMT"+(t.getTimezoneOffset()/60).toString().replace("-","+"))},$t=function(e,t){return en(e,t).reduce((function(e,t){var n=t.price;return"bun"===t.type?e+2*n:e+n}),0)},en=function(e,t){var n=[];return t.filter((function(e,n){return t.indexOf(e)===n})).forEach((function(t){return null!==t?n.push(function(e,t){return e.filter((function(e){return e._id===t}))[0]}(e,t)):""})),n},tn=function(){var e,t,n=null;null!==(null!==(e=localStorage.getItem("tokens"))&&void 0!==e?e:null)&&(n=JSON.parse(null!==(t=localStorage.getItem("tokens"))&&void 0!==t?t:"null").accessToken);return n},nn=n(16),rn=n.n(nn),cn=function(e){var t=e.ingredients,n=e.orders,r=e.isOrder,c=void 0!==r&&r,s=Object(u.h)(),a=function(e,t){return en(e,t).map((function(e,n){return Object(m.jsxs)("div",{className:d()(rn.a.iconWrap,l(t)>6&&5===n&&rn.a.iconBlackout),children:[l(t)>6&&5===n&&Object(m.jsxs)("div",{className:rn.a.numberOfHiddenPictures,children:["+",l(t)-6]}),Object(m.jsx)("div",{className:rn.a.iconBlackWrap,children:Object(m.jsx)("img",{className:rn.a.icon,src:e.image,alt:e.name})})]},e._id)}))},l=function(e){return e.filter((function(t,n){return e.indexOf(t)===n})).length};return Object(m.jsx)(m.Fragment,{children:n&&n.length>0&&t&&t.length>0&&n.sort(Xt).map((function(e,n){var r=e.number,u=e.name,l=e.status,j=e.createdAt,b=e.ingredients;return Object(m.jsx)("div",{className:rn.a.itemFeed,children:Object(m.jsxs)(i.b,{to:{pathname:c?"/profile/orders/".concat(r):"/feed/".concat(r),state:c?{order:s}:{feed:s}},children:[Object(m.jsxs)("div",{className:rn.a.itemTop,children:[Object(m.jsxs)("span",{className:"text text_type_digits-default",children:["#",r]}),Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:Zt(j)})]}),Object(m.jsx)("div",{children:Object(m.jsx)("h2",{className:"text text_type_main-medium",children:u})}),c&&Object(m.jsx)("p",{className:d()(l===We.Done&&rn.a.colorBlue,l===We.Cancel&&rn.a.colorRed,"text text_type_main-default mt-2"),children:Yt(l)}),Object(m.jsxs)("div",{className:rn.a.itemBottom,children:[Object(m.jsx)("div",{className:rn.a.icons,children:a(t,b)}),Object(m.jsxs)("span",{className:"".concat(rn.a.itemPrice," text text_type_digits-default"),children:[$t(t,b),"\xa0",Object(m.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})},"".concat(n).concat(r))}))})},sn="WS_CONNECTION_START",an="WS_CONNECTION_START_ORDERS",on="WS_CONNECTION_SUCCESS",un="WS_CONNECTION_ERROR",ln="WS_CONNECTION_CLOSED",dn="WS_GET_MESSAGE",jn="WS_SEND_MESSAGE",bn={wsInit:sn,wsInitOrders:an,wsSendMessage:jn,onOpen:on,onClose:ln,onError:un,onMessage:dn},mn=function(){return{type:sn}},On=function(){return{type:an}},pn=function(){return{type:ln}},fn=n(19),_n=n.n(fn),hn=function(){var e,t,n,c,s=h((function(e){return e.ingredient})).ingredients,a=f(),i=h((function(e){return e.ws.messages||[]})),o=h((function(e){return e.ws.wsConnected})),u=[],l=null!==(e=null===(t=i[0])||void 0===t?void 0:t.total)&&void 0!==e?e:0,j=null!==(n=null===(c=i[0])||void 0===c?void 0:c.totalToday)&&void 0!==n?n:0;Object(r.useEffect)((function(){return a(ct()),a(mn()),function(){a(pn())}}),[a]),i&&i.length>0&&i.forEach((function(e){var t=e.orders;u=t.map((function(e){return e}))}));var b=function(){var e=u.filter((function(e){return e.status===We.Done}));return e.length>0?e.map((function(e,t){var n=e.number;return Object(m.jsx)("span",{className:d()(_n.a.colorBlue,"text text_type_digits-default pb-2"),children:n},"".concat(n,"_0").concat(t))})):null},O=!!b(),p=function(){var e=u.filter((function(e){return e.status===We.Pending}));return e.length>0?e.map((function(e,t){var n=e.number;return Object(m.jsx)("span",{className:"text text_type_digits-default pb-2",children:n},"".concat(n,"_0").concat(t))})):null},_=!!p();return Object(m.jsxs)("section",{className:_n.a.sectionFeed,children:[Object(m.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(m.jsx)("div",{className:_n.a.feedMain,children:o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:d()(_n.a.feed,"scroll"),children:s&&s.length>0&&Object(m.jsx)(cn,{orders:u,ingredients:s})}),Object(m.jsxs)("div",{className:"".concat(_n.a.feedStatistics," ml-15"),children:[O&&Object(m.jsx)("div",{className:"mb-15 flexBox",children:Object(m.jsxs)("div",{className:_n.a.box,children:[Object(m.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(m.jsx)("div",{className:_n.a.numbersOrders,children:b()})]})}),_&&Object(m.jsx)("div",{className:"mb-15 flexBox",children:Object(m.jsxs)("div",{className:_n.a.box,children:[Object(m.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(m.jsx)("div",{className:_n.a.numbersOrders,children:p()})]})}),Object(m.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(m.jsx)("p",{className:"".concat(_n.a.numberShadows," text text_type_digits-large pb-15"),children:l}),Object(m.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(m.jsx)("p",{className:"".concat(_n.a.numberShadows," text text_type_digits-large"),children:j})]})]}):Object(m.jsx)("p",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"})})]})},xn=function(){var e=h((function(e){return e.ingredient})).ingredients,t=f(),n=h((function(e){return e.ws.messages||[]})),c=[];return Object(r.useEffect)((function(){return t(se()),t(ct()),function(){t(pn())}}),[t]),n&&n.length>0&&(c=n[0].orders.map((function(e){return e}))),Object(m.jsxs)("div",{className:"".concat(De.a.orders," pl-5 pr-5"),children:[Object(m.jsx)(Ue,{}),Object(m.jsx)("div",{className:d()(De.a.listOrders,"scroll"),children:e&&e.length>0&&Object(m.jsx)(cn,{isOrder:!0,orders:c,ingredients:e})})]})},gn=n(55),vn=n.n(gn),yn=function(e){var t=e.type,n=h((function(e){return e.ingredient})),c=n.ingredients,s=n.ingredientsSuccess,a="page"===t,i=Object(u.i)().id,o=f();return Object(r.useEffect)((function(){a&&o(ct())}),[a,o]),Object(m.jsx)(m.Fragment,{children:s&&c.length>0&&c.filter((function(e){return e._id===i})).map((function(e){var t=e.image,n=e.name,r=e.calories,c=e.proteins,s=e.fat,a=e.carbohydrates,i=e._id;return Object(m.jsxs)("section",{className:vn.a.content,children:[Object(m.jsx)("img",{className:"".concat(vn.a.imageCard," pr-5 pl-5"),src:t,alt:n}),Object(m.jsx)("p",{className:"text text_type_main-medium mt-4 mt-8",children:n}),Object(m.jsxs)("div",{className:"".concat(vn.a.description," mt-8"),children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(m.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:r})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:c})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:s})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a})]})]})]},i)}))})},Nn=n(36),Sn=["children"],Tn=function(e){var t=e.children,n=Object(Nn.a)(e,Sn),r=h((function(e){return e.user.authorized})),c=Object(u.h)(),s=c.pathname,a=c.state;return Object(m.jsx)(u.b,Object(g.a)(Object(g.a)({},n),{},{render:function(){return r?t:Object(m.jsx)(u.a,{to:{pathname:(null===a||void 0===a?void 0:a.from)||"/login",state:{from:s}}})}}))},In=["children","type"],En=function(e){var t=e.children,n=e.type,r=Object(Nn.a)(e,In),c=h((function(e){return e.user.authorized})),s=Object(u.h)(),a=s.pathname,i=s.state,o="/forgot-password"===(null===i||void 0===i?void 0:i.from),l=a.includes("reset-password");return!o&&l?Object(m.jsx)(u.a,{to:{pathname:"/forgot-password"}}):Object(m.jsx)(u.b,Object(g.a)(Object(g.a)({},r),{},{render:function(){return"guest"!==n||c?Object(m.jsx)(u.a,{to:{pathname:(null===i||void 0===i?void 0:i.from)||"/",state:{from:a}}}):t}}))},kn=n(23),wn=n.n(kn),Cn=function(e){var t=e.type,n=e.variant,c=h((function(e){return e.ingredient.ingredients})),s=Object(u.i)().id,a=f(),i=h((function(e){return e.ws.messages||[]})),l="page"===t,j=[],b=[];i.forEach((function(e){var t=e.orders;j=t.filter((function(e){return e.number===parseInt(s,10)}))})),Object(r.useEffect)((function(){return l&&(a(ct()),a("orders"===n?se():mn())),function(){l&&a(pn())}}),[l,a,n]),j&&j.length>0&&c&&c.length>0&&(b=en(c,j[0].ingredients));var O=function(e,t){return t.filter((function(t){return t===e})).length};return Object(m.jsx)(m.Fragment,{children:j&&j.length>0&&c&&c.length>0&&Object(m.jsxs)("div",{className:wn.a.feedDetails,children:[Object(m.jsxs)("p",{className:"text text_type_digits-default text_center mb-10",children:["#",s]}),Object(m.jsx)("p",{className:"text text_type_main-medium mb-3",children:j[0].name}),Object(m.jsx)("span",{className:"".concat(wn.a.status," text text_type_main-default"),children:Yt(j[0].status)}),Object(m.jsx)("p",{className:"text text_type_main-medium mt-15 mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(m.jsx)("div",{className:d()(wn.a.feedIngredients,"scroll","mb-10"),children:b.map((function(e){var t=e.name,n=e.image,r=e._id,c=e.price;return Object(m.jsxs)("div",{className:wn.a.feedIngredient,children:[Object(m.jsx)("div",{className:d()(wn.a.iconWrap,"mr-4"),children:Object(m.jsx)("div",{className:wn.a.iconBlackWrap,children:Object(m.jsx)("img",{className:wn.a.icon,alt:t,src:n})})}),Object(m.jsx)("div",{className:d()(wn.a.nameIngredient,"text text_type_main-default mr-4"),children:t}),Object(m.jsxs)("p",{className:"text text_type_digits-default",children:[O(r,j[0].ingredients)," x ",c,"\xa0"]}),Object(m.jsx)(o.CurrencyIcon,{type:"primary"})]},r)}))}),Object(m.jsxs)("div",{className:"flexBox",children:[Object(m.jsx)("p",{className:d()(wn.a.date,"text text_type_main-default text_color_inactive"),children:Zt(j[0].createdAt)}),Object(m.jsxs)("p",{className:"text text_type_digits-default",children:[$t(c,j[0].ingredients),"\xa0"]}),Object(m.jsx)(o.CurrencyIcon,{type:"primary"})]})]},s)})},Rn=function(){var e,t,n,r=_(),c=Object(u.h)(),s=c.state&&(null===(e=c.state)||void 0===e?void 0:e.modal),a=c.state&&(null===(t=c.state)||void 0===t?void 0:t.feed),i=c.state&&(null===(n=c.state)||void 0===n?void 0:n.order),o=Object(u.g)(),l=function(e){null===e||void 0===e||e.stopPropagation(),o.goBack(),r({type:rt})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(u.d,{location:i||a||s||c,children:[Object(m.jsx)(u.b,{path:"/",exact:!0,children:Object(m.jsx)(Qt,{})}),Object(m.jsx)(u.b,{path:"/ingredients/:id",children:Object(m.jsx)(yn,{type:"page"})}),Object(m.jsx)(En,{path:"/login",exact:!0,type:"guest",children:Object(m.jsx)(Re,{})}),Object(m.jsx)(En,{path:"/register",exact:!0,type:"guest",children:Object(m.jsx)(Ge,{})}),Object(m.jsx)(En,{path:"/forgot-password",exact:!0,type:"guest",children:Object(m.jsx)(Le,{})}),Object(m.jsx)(En,{path:"/reset-password",exact:!0,type:"guest",children:Object(m.jsx)(qe,{})}),Object(m.jsx)(u.b,{path:"/feed",exact:!0,children:Object(m.jsx)(hn,{})}),Object(m.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(m.jsx)(Cn,{type:"page"})}),Object(m.jsx)(Tn,{path:"/profile",exact:!0,children:Object(m.jsx)(Ae,{})}),Object(m.jsx)(Tn,{path:"/profile/orders",exact:!0,children:Object(m.jsx)(xn,{})}),Object(m.jsx)(Tn,{path:"/profile/orders/:id",exact:!0,children:Object(m.jsx)(Cn,{type:"page",variant:"orders"})}),Object(m.jsx)(u.b,{component:Ve})]}),s&&Object(m.jsx)(u.b,{path:"/ingredients/:id",children:Object(m.jsx)(Nt,{onClose:l,header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(m.jsx)(yn,{})})}),a&&Object(m.jsx)(u.b,{path:"/feed/:id",children:Object(m.jsx)(Nt,{onClose:l,children:Object(m.jsx)(Cn,{})})}),i&&Object(m.jsx)(u.b,{path:"/profile/orders/:id",children:Object(m.jsx)(Nt,{onClose:l,children:Object(m.jsx)(Cn,{})})})]})},Fn=function(){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(O,{}),Object(m.jsx)(Rn,{})]})},Dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},Pn=n(26),Bn=n(110),Un=n(27),An={orderRequest:!1,orderFailed:!1,orderSuccess:!1,number:null},Ln={loginRequest:!1,loginFailed:!1,loginSuccess:!1,logoutRequest:!1,logoutFailed:!1,logoutSuccess:!1,tokenRequest:!1,tokenFailed:!1,tokenSuccess:!1,getUserInfoRequest:!1,getUserInfoFailed:!1,getUserInfoSuccess:!1,patchUserInfoRequest:!1,patchUserInfoFailed:!1,patchUserInfoSuccess:!1,registerRequest:!1,registerFailed:!1,registerSuccess:!1,resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSuccess:!1,accessToken:void 0,refreshToken:void 0,authorized:!1,user:JSON.parse(null!==(wt=localStorage.getItem("user"))&&void 0!==wt?wt:"null")},Gn=n(108),qn=n.n(Gn),Wn={wsConnected:!1,messages:[]},Mn={ingredientsRequest:!1,ingredientsFailed:!1,ingredientsSuccess:!1,openIngredientId:null,ingredients:[],ingredientsInOrder:[]},Hn=Object(Pn.b)({ingredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return Object(g.a)(Object(g.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1,ingredientsSuccess:!1});case Qe:return Object(g.a)(Object(g.a)({},e),{},{ingredients:t.ingredients,ingredientsSuccess:!0,ingredientsRequest:!1});case Xe:return Object(g.a)(Object(g.a)({},e),{},{ingredientsSuccess:!1,ingredientsRequest:!1,ingredientsFailed:!0});case Ye:return Object(g.a)(Object(g.a)({},e),{},{ingredientsInOrder:[].concat(Object(Un.a)(e.ingredientsInOrder),Object(Un.a)(e.ingredients.filter((function(e){return e._id===t._id})).map((function(e){return e?Object(g.a)(Object(g.a)({},e),{},{id:t.id}):e}))))});case et:return Object(g.a)(Object(g.a)({},e),{},{ingredientsInOrder:[].concat(Object(Un.a)(e.ingredientsInOrder.filter((function(e){return"bun"!==e.type}))),Object(Un.a)(e.ingredients.filter((function(e){return e._id===t._id}))))});case Ze:return Object(g.a)(Object(g.a)({},e),{},{ingredientsInOrder:Object(Un.a)(e.ingredientsInOrder).filter((function(e,n,r){return n!==r.findIndex((function(e){return e._id===t._id}))}))});case $e:return Object(g.a)(Object(g.a)({},e),{},{ingredientsInOrder:[]});case tt:return Object(g.a)(Object(g.a)({},e),{},{ingredientsInOrder:qn()(e.ingredientsInOrder,{$splice:[[t.dragIndex,1],[t.hoverIndex,0,e.ingredientsInOrder[t.dragIndex]]]})});case nt:return Object(g.a)(Object(g.a)({},e),{},{openIngredientId:t._id});case rt:return Object(g.a)(Object(g.a)({},e),{},{openIngredientId:e.openIngredientId=null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:return Object(g.a)(Object(g.a)({},e),{},{orderRequest:!0,orderSuccess:!1,orderFailed:!1});case It:return Object(g.a)(Object(g.a)({},e),{},{number:t.value,orderSuccess:t.success,orderRequest:!1});case Et:return Object(g.a)(Object(g.a)({},e),{},{orderRequest:!1,orderSuccess:!1,orderFailed:!0});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(g.a)(Object(g.a)({},e),{},{accessToken:tn()});case N:return Object(g.a)(Object(g.a)({},e),{},{authorized:!0});case C:return Object(g.a)(Object(g.a)({},e),{},{loginRequest:!0,loginSuccess:!1,loginFailed:!1});case R:var n={refreshToken:t.refreshToken,accessToken:t.accessToken};return localStorage.setItem("tokens",JSON.stringify(n)),localStorage.setItem("user",JSON.stringify({email:t.user.email,name:t.user.name})),Object(g.a)(Object(g.a)({},e),{},{accessToken:t.accessToken,refreshToken:t.refreshToken,loginSuccess:t.success,user:t.user,loginRequest:!1,authorized:!0});case F:return Object(g.a)(Object(g.a)({},e),{},{loginRequest:!1,loginSuccess:!1,loginFailed:!0});case D:return Object(g.a)(Object(g.a)({},e),{},{logoutRequest:!0,logoutSuccess:!1,logoutFailed:!1});case P:return localStorage.clear(),Object(g.a)(Object(g.a)({},e),{},{logoutSuccess:!0,logoutRequest:!1,user:null,authorized:!1});case B:return Object(g.a)(Object(g.a)({},e),{},{logoutRequest:!1,logoutSuccess:!1,logoutFailed:!0});case U:return Object(g.a)(Object(g.a)({},e),{},{tokenRequest:!0,tokenSuccess:!1,tokenFailed:!1});case A:var r={refreshToken:t.refreshToken,accessToken:t.accessToken};return localStorage.setItem("tokens",JSON.stringify(r)),Object(g.a)(Object(g.a)({},e),{},{accessToken:t.accessToken,refreshToken:t.refreshToken,tokenSuccess:t.success,tokenRequest:!1});case L:return Object(g.a)(Object(g.a)({},e),{},{tokenRequest:!1,tokenSuccess:!1,tokenFailed:!0});case G:return Object(g.a)(Object(g.a)({},e),{},{getUserInfoRequest:!0,getUserInfoSuccess:!1,getUserInfoFailed:!1});case q:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,getUserInfoSuccess:t.success,getUserInfoRequest:!1});case W:return Object(g.a)(Object(g.a)({},e),{},{getUserInfoRequest:!1,getUserInfoSuccess:!1,getUserInfoFailed:!0});case M:return Object(g.a)(Object(g.a)({},e),{},{patchUserInfoRequest:!0,patchUserInfoSuccess:!1,patchUserInfoFailed:!1});case V:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,patchUserInfoSuccess:t.success,patchUserInfoRequest:!1});case H:return Object(g.a)(Object(g.a)({},e),{},{patchUserInfoRequest:!1,patchUserInfoSuccess:!1,patchUserInfoFailed:!0});case z:return Object(g.a)(Object(g.a)({},e),{},{registerRequest:!0,registerSuccess:!1,registerFailed:!1});case J:return Object(g.a)(Object(g.a)({},e),{},{accessToken:t.accessToken,refreshToken:t.refreshToken,registerSuccess:t.success,registerRequest:!1});case K:return Object(g.a)(Object(g.a)({},e),{},{registerRequest:!1,registerSuccess:!1,registerFailed:!0});case Q:return Object(g.a)(Object(g.a)({},e),{},{resetPasswordRequest:!0,resetPasswordSuccess:!1,resetPasswordFailed:!1});case Y:return Object(g.a)(Object(g.a)({},e),{},{resetPasswordSuccess:t.success,resetPasswordRequest:!1});case X:return Object(g.a)(Object(g.a)({},e),{},{resetPasswordRequest:!1,resetPasswordSuccess:!1,resetPasswordFailed:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return Object(g.a)({},e);case on:return Object(g.a)(Object(g.a)({},e),{},{wsConnected:!0});case un:case ln:return Object(g.a)(Object(g.a)({},e),{},{wsConnected:!1});case dn:return Object(g.a)(Object(g.a)({},e),{},{messages:e.messages&&e.messages.length?[].concat(Object(Un.a)(e.messages),[Object(g.a)({},t.message)]):[Object(g.a)({},t.message)]});default:return e}}}),Vn=n(109),zn=["success"],Jn=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Pn.c)(Object(Pn.a)((function(e){return function(t){return function(n){var r,c,s=null!==(r=localStorage.getItem("tokens"))&&void 0!==r?r:null;if(null!==s){var a=JSON.parse(s),i=a.accessToken,o=a.refreshToken,u=Object(Vn.a)(i),l=u&&u.exp<Date.now()/1e3;switch(n.type){case S:t({type:N});break;case E:l?(t(ne({refreshToken:o,accessToken:i})),setTimeout((function(){t(te({refreshToken:e.getState().user.refreshToken}))}),1e3)):t(te({refreshToken:o}));break;case T:l?(t(ne({refreshToken:o,accessToken:i})),setTimeout((function(){t(re({accessToken:e.getState().user.accessToken}))}),1e3)):t(re({accessToken:i}));break;case k:l?(t(ne({refreshToken:o,accessToken:i})),setTimeout((function(){var r;t(ce(n.user,null!==(r=e.getState().user.accessToken)&&void 0!==r?r:i))}),1e3)):t(ce(n.user,i));break;case St:l?(t(ne({refreshToken:o,accessToken:i})),setTimeout((function(){var r;t(kt(n.ingredientIds,null!==(r=e.getState().user.accessToken)&&void 0!==r?r:i))}),1e3)):t(kt(n.ingredientIds,i));break;case w:l?(t(ne({refreshToken:o,accessToken:i})),setTimeout((function(){t(On())}),1e3)):t(On())}}else if(n.type===I)return void t((c=n.user,function(e){e(ae()),fetch("".concat(y,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(t){if(!t.ok)throw e(ie()),new Error("Network response was not OK");return t.json()})).then((function(t){e(oe(t.success,t.accessToken,t.refreshToken,{email:t.user.email,name:t.user.name}))})).catch((function(t){e(ie()),console.error("There has been a problem with fetch operation:",t)}))}));t(n)}}}),(Ct=bn,function(e){var t=null;return function(n){return function(r){var c=Ct.wsInit,s=Ct.wsInitOrders,a=Ct.onOpen,i=Ct.onClose,o=Ct.onError,u=e.dispatch,l=(0,e.getState)().user,d=l.authorized,j=l.accessToken;if(r.type===c&&(t=new WebSocket("wss://norma.nomoreparties.space/orders/all")),r.type===s&&d&&j&&(t=new WebSocket("".concat("wss://norma.nomoreparties.space/orders","?token=").concat(j.replace("Bearer","").trim()))),t&&(t.onopen=function(e){u({type:a,payload:e})},t.onerror=function(e){u({type:o,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=n.success,c=Object(Nn.a)(n,zn);u(function(e,t){return{type:dn,message:t,success:e}}(r,c))},t.onclose=function(e){u({type:i,payload:e})},r.type===jn&&j)){r.message.token=j.replace("Bearer","").trim();var b=r.message;t.send(JSON.stringify(b))}n(r)}}}),Bn.a)),Kn=Object(Pn.d)(Hn,Jn);Kn.dispatch({type:S}),a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(p.a,{store:Kn,children:Object(m.jsx)(Fn,{})})}),document.getElementById("root")),Dn()},23:function(e,t,n){e.exports={feedDetails:"FeedDetails_feedDetails__3LKFE",status:"FeedDetails_status__2sIdF",feedIngredients:"FeedDetails_feedIngredients__3CWrX",feedIngredient:"FeedDetails_feedIngredient__1Z53u",nameIngredient:"FeedDetails_nameIngredient__26vik",date:"FeedDetails_date__1LXpG",iconWrap:"FeedDetails_iconWrap__2l2EW",iconBlackWrap:"FeedDetails_iconBlackWrap__LtLvV",icon:"FeedDetails_icon__B4dXL"}},28:function(e,t,n){e.exports={root:"BurgerConstructor_root__CiQi_",content:"BurgerConstructor_content__3UWiF",scrollTrackVertical:"BurgerConstructor_scrollTrackVertical__1FXF2",scrollThumbVertical:"BurgerConstructor_scrollThumbVertical__1THYX",totalPrice:"BurgerConstructor_totalPrice__Drp2r",price:"BurgerConstructor_price__32APl",emptyCart:"BurgerConstructor_emptyCart__1iVEo"}},31:function(e,t,n){e.exports={header:"Header_header__1WL4t",navigation:"Header_navigation__Q4RU8",content:"Header_content__2KnVC",links:"Header_links__PoTI8",logo:"Header_logo__2K2u1"}},32:function(e,t,n){e.exports={root:"BurgerIngredients_root__3V62U",tabs:"BurgerIngredients_tabs__1b38V",contentInScroll:"BurgerIngredients_contentInScroll__25t9G",scrollTrackVertical:"BurgerIngredients_scrollTrackVertical__G5jr6",scrollThumbVertical:"BurgerIngredients_scrollThumbVertical__Hboh8",ingredients:"BurgerIngredients_ingredients__2wnGa"}},53:function(e,t,n){e.exports={card:"IngredientInList_card__1-ZGK",price:"IngredientInList_price__1W7OA",name:"IngredientInList_name__2H5-y"}},54:function(e,t,n){e.exports={modal:"Modal_modal__1ZJHi",close:"Modal_close__3BxHY",head:"Modal_head__3-MyG"}},55:function(e,t,n){e.exports={description:"IngredientDetails_description__2TvCn",imageCard:"IngredientDetails_imageCard__2plH6",content:"IngredientDetails_content__2kMLt"}},78:function(e,t,n){e.exports={orderNumber:"OrderDetails_orderNumber__1gEON",content:"OrderDetails_content__1XYB0"}},79:function(e,t,n){e.exports={fillings:"IngredientInOrder_fillings__1a539",bunTopBottom:"IngredientInOrder_bunTopBottom__1PWIL"}}},[[218,1,2]]]);
//# sourceMappingURL=main.0646e781.chunk.js.map